# X API 無料プラン（Basic tier）の制限事項

## アクセストークンについて

X API v2の無料プランでは、以下の制限があります：

1. **アクセストークンの有効期限**: 2時間
2. **リフレッシュトークン**: 使用不可（有料プランのみ）
3. **認証方式**: Bearer Token（OAuth 2.0）のみ

## 401エラーが発生する原因

1. **アクセストークンの期限切れ**
   - 生成から2時間で自動的に無効化
   - 新しいトークンを生成する必要がある

2. **不正なトークン形式**
   - OAuth 1.0aのトークンは使用不可
   - Bearer Tokenのみ使用可能

## 解決方法

### 新しいアクセストークンの生成手順

1. X Developer Portal (https://developer.twitter.com) にログイン
2. プロジェクトとアプリを選択
3. "Keys and tokens" タブに移動
4. "Access Token and Secret" セクションで "Regenerate" をクリック
5. 新しいトークンをコピー
6. Vercelの環境変数を更新：
   - `X_ACCESS_TOKEN`: 新しいアクセストークン
   - `X_ACCESS_SECRET`: 新しいアクセストークンシークレット

### API制限

- **検索API**: 月450リクエストまで（アプリレベル）
- **ツイート投稿**: 月1,500件まで
- **リツイート**: 月50件まで

## 推奨事項

1. **定期的なトークン更新**
   - 2時間ごとに手動で更新が必要
   - 自動更新は有料プランのみ

2. **API使用量の管理**
   - 検索は必要最小限に
   - 結果は1件のみ取得する設定

3. **エラーハンドリング**
   - 401エラー時は新しいトークンの生成を促す
   - 429エラー時はレート制限の説明を表示